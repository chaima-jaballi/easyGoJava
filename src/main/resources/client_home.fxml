<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.Cursor?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.esprit.tn.pidev.controllers.TripClientController"
      spacing="20" style="-fx-padding: 25; -fx-background-color: linear-gradient(to bottom, #e3f2fd, #bbdefb); -fx-min-width: 1000px;">

    <!-- En-tête amélioré -->
    <HBox spacing="15" alignment="CENTER_LEFT" style="-fx-padding: 10 15; -fx-background-color: #1976d2; -fx-background-radius: 5;">
        <VBox spacing="5">
            <Label text="Trajets disponibles" style="-fx-font-size: 26px; -fx-font-weight: bold; -fx-text-fill: white; -fx-font-family: 'Segoe UI'; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 2, 0, 1, 1);"/>
            <Label text="Réservez votre prochain voyage" style="-fx-font-size: 16px; -fx-text-fill: #e3f2fd; -fx-font-family: 'Segoe UI';"/>
        </VBox>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="Vos réservations" onAction="#handleViewReservations"
                style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 8 15; -fx-background-radius: 5; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 5, 0, 0, 1);"/>
    </HBox>

    <!-- Barre de recherche améliorée -->
    <GridPane hgap="10" vgap="10" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 5; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 5, 0, 0, 1);">
        <Label text="Recherche avancée" GridPane.columnSpan="3"
               style="-fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-font-size: 16px; -fx-padding: 0 0 10 0;"/>

        <Label text="Départ:" GridPane.rowIndex="1" style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
        <TextField fx:id="searchDepartureField" promptText="Ville de départ" GridPane.rowIndex="1" GridPane.columnIndex="1"
                   style="-fx-pref-width: 200px; -fx-padding: 5;"/>

        <Label text="Destination:" GridPane.rowIndex="2" style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
        <TextField fx:id="searchDestinationField" promptText="Ville d'arrivée" GridPane.rowIndex="2" GridPane.columnIndex="1"
                   style="-fx-pref-width: 200px; -fx-padding: 5;"/>

        <Label text="Date:" GridPane.rowIndex="3" style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
        <DatePicker fx:id="searchDateField" GridPane.rowIndex="3" GridPane.columnIndex="1"
                    style="-fx-pref-width: 200px;"/>

        <Label text="Trier par:" GridPane.rowIndex="4" style="-fx-text-fill: #374151; -fx-font-weight: bold;"/>
        <ComboBox fx:id="sortComboBox" GridPane.rowIndex="4" GridPane.columnIndex="1"
                  style="-fx-pref-width: 200px; -fx-padding: 5;"/>
    </GridPane>

    <!-- Tableau des trajets amélioré -->
    <TableView fx:id="tripsTable" style="-fx-background-color: white; -fx-border-radius: 5; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
        <columns>
            <TableColumn fx:id="idColumn" text="Ref" prefWidth="50" style="-fx-alignment: CENTER;"/>
            <TableColumn fx:id="departureColumn" text="Départ" prefWidth="150" style="-fx-alignment: CENTER_LEFT;"/>
            <TableColumn fx:id="destinationColumn" text="Destination" prefWidth="150" style="-fx-alignment: CENTER_LEFT;"/>
            <TableColumn fx:id="dateColumn" text="Date" prefWidth="100" style="-fx-alignment: CENTER;"/>
            <TableColumn fx:id="timeColumn" text="Heure" prefWidth="80" style="-fx-alignment: CENTER;"/>
            <TableColumn fx:id="seatsColumn" text="Places" prefWidth="60" style="-fx-alignment: CENTER;"/>
            <TableColumn fx:id="priceColumn" text="Prix (DT)" prefWidth="80" style="-fx-alignment: CENTER_RIGHT;"/>
            <TableColumn fx:id="actionColumn" text="Action" prefWidth="100" style="-fx-alignment: CENTER;"/>
        </columns>
        <columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
        </columnResizePolicy>
        <style>
            -fx-font-size: 14px;
            -fx-table-cell-border-color: transparent;

            .column-header {
            -fx-background-color: linear-gradient(to bottom, #2196f3, #1976d2);
            -fx-text-fill: white;
            -fx-font-weight: bold;
            -fx-alignment: CENTER;
            -fx-border-color: #0d47a1;
            -fx-border-width: 0 0 1px 0;
            }

            .table-row-cell:odd {
            -fx-background-color: #e3f2fd;
            }

            .table-row-cell:even {
            -fx-background-color: white;
            }

            .table-row-cell:selected {
            -fx-background-color: #1976d2;
            -fx-text-fill: white;
            }

            .table-row-cell:hover {
            -fx-background-color: #bbdefb;
            }
        </style>
    </TableView>
</VBox>